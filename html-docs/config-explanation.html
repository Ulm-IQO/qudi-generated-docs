<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Qudi: How to use and understand a config file</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Qudi
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">How to use and understand a config file </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Config files are essential in our software, since they tell basically which modules you want to connect to each other. The config file is also the place where the required parameters are specified individually for a module.</p>
<h2>YAML implementation in Qudi</h2>
<p>Our config file uses the <a href="http://yaml.org/">YAML</a> format, a data serialization format designed for human readability and interaction with scripting languages. Qudi modifies the ruamel.yaml implementation, which serves as a YAML parser. Therefore Qudi has implemented a loader and a dumper using an collections.OrderedDict() instead of the regular python dict() used by ruamel.yaml. Additionally, it fixes a bug in ruamel.yaml with scientific notation and allows to dump numpy.dtypes and numpy.ndarrays.</p>
<h2>Example of a config file</h2>
<p>Each module is defined in a predetermined category i.e. in</p>
<ul>
<li>global,</li>
<li>hardware,</li>
<li>logic or</li>
<li>gui.</li>
</ul>
<p>These categories (all except global) are folders in the trunk directory of our software.</p>
<p>Let's have a look on an example scenario of an (incomplete) configuration: </p><div class="fragment"><div class="line">hardware:</div><div class="line">    &lt;identifier&gt;:</div><div class="line">        module.Class: &#39;&lt;foldername&gt;.&lt;filename&gt;.&lt;classname&gt;&#39;</div><div class="line">        attribute_string_example:   &#39;example_text&#39;</div><div class="line">        attribute_int_example:      12345</div><div class="line">        attribute_float_example:    1.234</div><div class="line">        attribute_boolean_example:  True</div><div class="line">        attribute_list_example:</div><div class="line">                                - &#39;first&#39;</div><div class="line">                                - &#39;second&#39;</div><div class="line">                                - &#39;another&#39;</div><div class="line">        attribute_list_floats:</div><div class="line">                                - -200.0    # the second minus belongs to the number</div><div class="line">                                - 0.0</div><div class="line">                                - 200.0</div><div class="line"></div><div class="line"></div><div class="line">logic:</div><div class="line">    &lt;identifier-other&gt;:</div><div class="line">        module.Class: &#39;&lt;foldername2&gt;.&lt;filename2&gt;.&lt;classname2&gt;&#39;</div><div class="line">        attribute1: &#39;assigned_value1&#39;</div><div class="line">        connect:</div><div class="line">            &lt;keyword_in1&gt;: &#39;&lt;identifier&gt;.&lt;keyword_out1&gt;&#39;</div><div class="line"></div><div class="line">gui:</div><div class="line">    &lt;identifier-other2&gt;:</div><div class="line">        module.Class: &#39;&lt;foldername3&gt;.&lt;filename3&gt;.&lt;classname3&gt;&#39;</div><div class="line">        attribute1: &#39;assigned_value1&#39;</div><div class="line">        connect:</div><div class="line">            &lt;keyword_in2&gt;: &#39;&lt;identifier-other&gt;.&lt;keyword_out2&gt;&#39;</div></div><!-- fragment --><p>Each of this categories contains an <code>&lt;identifier&gt;</code>, i.e. a name which is used for a module. This identifier is relevant in order to separate and distinguish between the different modules. The <code>&lt;identifier&gt;</code> represents a reference to the constructed object of the module. Therefore the keyword <code>module.Class</code> indicates the path to the construction class in pythonic notation (directory separated by points).</p>
<p>For instance: In the category <code>hardware</code> you can specify the attribute <code>module.Class</code> in the <code>&lt;identifier&gt;</code> as</p>
<div class="fragment"><div class="line">module.Class: &#39;ni_card.NICard&#39;</div></div><!-- fragment --><p>which will determine that the module will be found in the trunk folder in the folder structure: </p><pre class="fragment">hardware/ni_card.py
</pre><p>where the class <code>NICard</code> should be situated within the file <code>ni_card.py</code>.</p>
<h2>Connectors</h2>
<p>A connector is a way for the Qudi manager to give a module access to other modules.</p>
<p>The general rule for this is that logic modules can only have a connector that gives access to hardware modules or other logic modules and GUI modules can only access logic modules.</p>
<p>To create a Connector, declare it as a class variable in the module like this:</p>
<div class="fragment"><div class="line">class &lt;classname2&gt;(...):</div><div class="line">...</div><div class="line">    &lt;connector name&gt; = Connector(interface=&#39;&lt;InterfaceForThisConnector&gt;&#39;)</div><div class="line">    &lt;another connector name&gt; = Connector(interface=&#39;&lt;InterfaceForTheOtherConnector&gt;&#39;)</div></div><!-- fragment --><p>A reference to the connected module can then be obtained at runtime by:</p>
<div class="fragment"><div class="line">&lt;connected module&gt; = self.get_connector(&#39;&lt;connector name&gt;&#39;)</div><div class="line">&lt;antother connected module&gt; = self.get_connector(&#39;&lt;another connector name&gt;&#39;)</div></div><!-- fragment --> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
